# DataK9 Offline Mode

DataK9 is **100% offline-capable** with no external internet dependencies.

## Overview

All components of DataK9 work completely offline:
- ‚úÖ **DataK9 Studio** - Visual configuration IDE
- ‚úÖ **HTML Validation Reports** - Interactive reports with charts
- ‚úÖ **Data Profile Reports** - Statistical analysis with visualizations
- ‚úÖ **CLI Tool** - Command-line validation framework

**Zero external dependencies.** No CDN connections. No internet required.

---

## Component Breakdown

### 1. DataK9 Studio (`datak9-studio.html`)

**Bundled Resources:**
- Monaco Editor 0.45.0 (13MB) - Self-hosted in `monaco-editor/`
- All JavaScript and CSS embedded
- No external fonts, icons, or libraries

**File Structure:**
```
datak9-studio.html          # 208KB - Main application
monaco-editor/              # 13MB - Code editor
  ‚îî‚îÄ‚îÄ min/vs/
      ‚îú‚îÄ‚îÄ loader.js
      ‚îú‚îÄ‚îÄ editor/
      ‚îú‚îÄ‚îÄ base/
      ‚îî‚îÄ‚îÄ basic-languages/  # 80+ language syntaxes
```

**Usage:**
```bash
# Open directly - works offline
open datak9-studio.html

# Or via local server
python3 -m http.server 8000
# Access: http://localhost:8000/datak9-studio.html
```

---

### 2. HTML Validation Reports

**Generated by:** `validation_framework/reporters/html_reporter.py`

**Bundled Resources:**
- Chart.js 4.4.0 (201KB) - Self-hosted in `resources/js/chart.min.js`
- All CSS embedded in report
- No external fonts or icons

**Report Features (All Offline):**
- Interactive charts and graphs
- Collapsible sections
- Sortable tables
- Sample failure display
- Export capabilities

**Generation:**
```bash
python3 -m validation_framework.cli validate config.yaml
# Generates: validation_report.html (self-contained)
```

**Report Structure:**
```html
<!DOCTYPE html>
<html>
  <head>
    <!-- All CSS embedded -->
    <style>...</style>
  </head>
  <body>
    <!-- Report content -->

    <!-- Chart.js from local file -->
    <script src="resources/js/chart.min.js"></script>

    <!-- Report JavaScript (embedded) -->
    <script>...</script>
  </body>
</html>
```

---

### 3. Data Profile Reports

**Generated by:** `validation_framework/profiler/html_reporter.py`

**Bundled Resources:**
- Chart.js 4.4.0 (201KB) - Self-hosted in `resources/js/chart.min.js`
- All CSS embedded
- All JavaScript embedded

**Profile Features (All Offline):**
- Statistical distributions
- Correlation matrices
- Type inference charts
- Quality metrics
- Auto-generated validation suggestions

**Generation:**
```bash
python3 -m validation_framework.cli profile data.csv
# Generates: data_profile.html (self-contained)
```

---

### 4. CLI Validation Framework

**Python Code:** Pure Python with standard libraries + pandas
**No Internet:** Zero network calls in validation logic
**Data Sources:** All local (files or local database connections)

**Dependencies (All Offline):**
```
pandas          # Data manipulation
pyyaml          # Config parsing
jinja2          # HTML templating
click           # CLI interface
openpyxl        # Excel support (optional)
pyarrow         # Parquet support (optional)
```

---

## Deployment for Air-Gapped Environments

### Package Everything

```bash
# 1. Clone repository
git clone https://github.com/danieledge/data-validation-tool.git
cd data-validation-tool

# 2. Verify offline resources
ls -lh resources/js/chart.min.js          # Chart.js library
ls -lh monaco-editor/min/vs/loader.js     # Monaco Editor

# 3. Package for transfer
tar -czf datak9-offline.tar.gz \
    validation_framework/ \
    datak9-studio.html \
    monaco-editor/ \
    resources/ \
    requirements.txt \
    README.md

# 4. Transfer to air-gapped system
# (USB drive, secure file transfer, etc.)
```

### Install on Air-Gapped System

```bash
# 1. Extract package
tar -xzf datak9-offline.tar.gz
cd data-validation-tool

# 2. Install Python dependencies (offline wheel files)
# Option A: If you have wheel files
pip install --no-index --find-links=/path/to/wheels -r requirements.txt

# Option B: If using pre-installed environment
# Just verify Python 3.8+ is available

# 3. Test offline operation
python3 -m validation_framework.cli --version
open datak9-studio.html
```

---

## File Size Summary

| Component | Size | Description |
|-----------|------|-------------|
| **DataK9 Studio** | 208KB | Main HTML file |
| **Monaco Editor** | 13MB | Code editor engine |
| **Chart.js** | 201KB | Charting library |
| **Python Framework** | ~500KB | Core validation code |
| **Total Package** | **~14MB** | Complete offline bundle |

---

## Verification

### Test Offline Mode

```bash
# 1. Disconnect from internet
sudo ifconfig en0 down  # Mac
# OR
sudo ip link set eth0 down  # Linux

# 2. Test DataK9 Studio
open datak9-studio.html
# Should load completely, no errors

# 3. Test CLI validation
python3 -m validation_framework.cli validate test-config.yaml
# Should generate report successfully

# 4. View HTML report
open validation_report.html
# Should display charts and all features

# 5. Test data profiling
python3 -m validation_framework.cli profile test-data.csv
# Should generate profile report

# 6. Reconnect network
sudo ifconfig en0 up  # Mac
```

### Check for Network Calls

```bash
# Monitor network activity during validation
# Should show ZERO external connections

# Mac
sudo tcpdump -i en0 -n | grep -v "192.168\|127.0.0.1"

# Linux
sudo tcpdump -i eth0 -n | grep -v "192.168\|127.0.0.1"

# Run validation - should see no output (no external traffic)
python3 -m validation_framework.cli validate config.yaml
```

---

## Corporate Environment Benefits

### Security & Compliance

‚úÖ **No Data Leakage**
- Zero external network calls
- All processing happens locally
- No telemetry or analytics

‚úÖ **Audit Trail**
- All resources are local and inspectable
- No third-party dependencies at runtime
- Complete code visibility

‚úÖ **Compliance Ready**
- SOC 2 compatible (no external data transfer)
- GDPR compliant (data stays local)
- HIPAA friendly (PHI never leaves environment)

### Operational Benefits

‚úÖ **Firewall Friendly**
- No blocked CDN requests
- No proxy configuration needed
- Works behind strictest firewalls

‚úÖ **Performance**
- No network latency
- Consistent load times
- No CDN downtime risk

‚úÖ **Reliability**
- No dependency on external services
- Works during internet outages
- Predictable behavior

---

## Architecture Details

### How Reports Reference Local Resources

**Validation Reports:**
```python
# validation_framework/reporters/html_reporter.py (line 992)
<script src="resources/js/chart.min.js"></script>
```

**Profile Reports:**
```python
# validation_framework/profiler/html_reporter.py (line 72)
<script src="resources/js/chart.min.js"></script>
```

**Path Resolution:**
```
Project Root:
‚îú‚îÄ‚îÄ validation_framework/
‚îÇ   ‚îî‚îÄ‚îÄ reporters/
‚îÇ       ‚îî‚îÄ‚îÄ html_reporter.py
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îî‚îÄ‚îÄ chart.min.js
‚îî‚îÄ‚îÄ validation_report.html (references ../resources/js/chart.min.js)
```

### DataK9 Studio Monaco Loading

```javascript
// datak9-studio.html (line 2375)
<script src="monaco-editor/min/vs/loader.js"></script>

// AMD loader configuration (line 3171)
require.config({
    paths: {
        'vs': 'monaco-editor/min/vs'
    }
});
```

---

## Licenses

All bundled libraries are open source and permissively licensed:

| Library | Version | License | Commercial Use |
|---------|---------|---------|----------------|
| Monaco Editor | 0.45.0 | MIT | ‚úÖ Yes |
| Chart.js | 4.4.0 | MIT | ‚úÖ Yes |
| DataK9 | 2.3.0 | MIT | ‚úÖ Yes |

**No attribution required** for any component.
**Safe for commercial use** in corporate environments.

---

## Troubleshooting

### Monaco Editor Not Loading

**Symptom:** Blank YAML editor in DataK9 Studio

**Solution:**
```bash
# Verify Monaco files exist
ls -la monaco-editor/min/vs/loader.js
ls -la monaco-editor/min/vs/editor/editor.main.js

# Check browser console for errors
# Should not see "Failed to load resource" errors
```

### Charts Not Displaying in Reports

**Symptom:** Reports show "Chart loading..." or blank chart areas

**Solution:**
```bash
# Verify Chart.js exists
ls -la resources/js/chart.min.js

# Check browser console
# Should not see "chart.min.js 404" errors

# Verify report references correct path
grep "chart.min.js" validation_report.html
```

### Report Paths Not Resolving

**Symptom:** Resources not loading when opening report

**Solution:**
```bash
# Ensure project structure is maintained
data-validation-tool/
‚îú‚îÄ‚îÄ resources/js/chart.min.js
‚îú‚îÄ‚îÄ monaco-editor/
‚îî‚îÄ‚îÄ validation_report.html

# Or generate report with absolute paths
python3 -m validation_framework.cli validate \
    --output-dir $(pwd)/reports/ \
    config.yaml
```

---

## Updates & Maintenance

### Updating Monaco Editor

```bash
# Download new version
cd monaco-editor
curl -L "https://registry.npmjs.org/monaco-editor/-/monaco-editor-X.Y.Z.tgz" -o monaco.tgz
tar -xzf monaco.tgz
mv package/min/vs/* min/vs/
rm -rf package monaco.tgz

# Update version in documentation
# Update comment in datak9-studio.html
```

### Updating Chart.js

```bash
# Download new version
curl -L "https://cdn.jsdelivr.net/npm/chart.js@X.Y.Z/dist/chart.umd.min.js" \
    -o resources/js/chart.min.js

# Update version in documentation
```

---

## Support

For offline deployment assistance:
- **Documentation:** [GitHub Repository](https://github.com/danieledge/data-validation-tool)
- **Issues:** [GitHub Issues](https://github.com/danieledge/data-validation-tool/issues)
- **Deployment Guide:** See `MONACO_SELF_HOSTED.md`

---

**üêï DataK9 - Your offline-capable K9 guardian for data quality**

Author: Daniel Edge
License: MIT
